<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../template/newTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns="http://www.w3.org/1999/xhtml">
    <link rel="stylesheet" type="text/css" href="../../resources/css/main.css" /> 

    <ui:define name="content">
        <f:event listener="#{userData.authorize}" type="preRenderView" />
        <h:form id="form" dir="#{userData.dir}" style="margin-right: 1.8vh">
            <p:fieldset legend="مبيعات مندوب حسب مجموعات الاصناف الرئيسية " style="margin-bottom:20px">


                <h:panelGrid id="firstSegment" columns="2" cellspacing="10" cellpadding="0" >

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="width: 70px" value="من رقم العميل"/>
                        </h:panelGroup> 

                        <h:panelGroup>                          
                            <p:autoComplete style="width:75%!important" 

                                            dropdown="true"
                                            converter="#{invDelegatorSalesByMainItemsGroupMB.invOrgSiteConverter}"
                                            value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.invOrganizationSiteFrom}"
                                            var="p"
                                            itemLabel="#{p}" 
                                            itemValue="#{p}" 
                                            forceSelection="false" 
                                            completeMethod="#{invDelegatorSalesByMainItemsGroupMB.completOrgSite}" >
                            </p:autoComplete>
                        </h:panelGroup> 
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="width: 70px" value="إلى  رقم العميل"/>
                        </h:panelGroup> 

                        <h:panelGroup>
                            <p:autoComplete style="width:75%!important" 

                                            dropdown="true"
                                            converter="#{invDelegatorSalesByMainItemsGroupMB.invOrgSiteConverter}"
                                            value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.invOrganizationSiteTo}"
                                            var="p"
                                            itemLabel="#{p}" 
                                            itemValue="#{p}" 
                                            forceSelection="false" 
                                            completeMethod="#{invDelegatorSalesByMainItemsGroupMB.completOrgSite}" >
                            </p:autoComplete>
                        </h:panelGroup> 
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="width: 70px" value="من مندوب مبيعات"/>
                        </h:panelGroup> 

                        <h:panelGroup>
                            <p:autoComplete style="width:75%!important" 

                                            dropdown="true"
                                            converter="#{invDelegatorSalesByMainItemsGroupMB.invDelegatorConverter}"
                                            value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.delegateCodeFrom}"
                                            var="p"
                                            itemLabel="#{p}" 
                                            itemValue="#{p}" 
                                            forceSelection="false" 
                                            completeMethod="#{invDelegatorSalesByMainItemsGroupMB.completeInvDelegator}" >
                            </p:autoComplete>
                        </h:panelGroup> 
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="width: 70px" value="إلى  مندوب مبيعات"/>
                        </h:panelGroup> 

                        <h:panelGroup>
                            <p:autoComplete style="width:75%!important" 

                                            dropdown="true"
                                            converter="#{invDelegatorSalesByMainItemsGroupMB.invDelegatorConverter}"
                                            value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.delegateCodeTo}"
                                            var="p"
                                            itemLabel="#{p}" 
                                            itemValue="#{p}" 
                                            forceSelection="false" 
                                            completeMethod="#{invDelegatorSalesByMainItemsGroupMB.completeInvDelegator}" >
                            </p:autoComplete>

                        </h:panelGroup> 

                    </h:panelGroup>

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="width: 70px" value="من  رقم مستودع"/>
                        </h:panelGroup> 

                        <h:panelGroup>
                            <p:autoComplete style="width:75%!important" 

                                            dropdown="true"
                                            converter="#{invDelegatorSalesByMainItemsGroupMB.invInventoryConverter}"
                                            value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.inventoryIdFrom}"
                                            var="p"
                                            itemLabel="#{p}" 
                                            itemValue="#{p}" 
                                            forceSelection="false" 
                                            completeMethod="#{invDelegatorSalesByMainItemsGroupMB.completeInventory}" >
                            </p:autoComplete>
                        </h:panelGroup> 
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="width: 70px" value="إلى   رقم مستودع"/>
                        </h:panelGroup> 

                        <h:panelGroup>
                            <p:autoComplete style="width:75%!important" 

                                            dropdown="true"
                                            converter="#{invDelegatorSalesByMainItemsGroupMB.invInventoryConverter}"
                                            value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.inventoryIdTo}"
                                            var="p"
                                            itemLabel="#{p}" 
                                            itemValue="#{p}" 
                                            forceSelection="false" 
                                            completeMethod="#{invDelegatorSalesByMainItemsGroupMB.completeInventory}" >
                            </p:autoComplete>
                        </h:panelGroup> 
                    </h:panelGroup>



                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="width: 70px" value="من  رقم فاتورة"/>
                        </h:panelGroup> 

                        <h:panelGroup>
                            <p:inputNumber   style="width: 56.5%"  value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.invoiceNumberFrom}"/>
                        </h:panelGroup> 
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="width: 70px" value="إلى رقم فاتورة  "/>
                        </h:panelGroup> 

                        <h:panelGroup>
                            <p:inputNumber style="width: 56.5%"  value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.invoiceNumberTo}"/>
                        </h:panelGroup> 
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel  style="width: 70px" value="من تاريخ"/>
                        </h:panelGroup>

                        <h:panelGroup>
                            <p:calendar pattern="dd/MM/yyyy" 
                                        value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.dateFrom}"
                                        style="width: 56.5%">

                            </p:calendar>
                        </h:panelGroup>
                    </h:panelGroup>

                    <h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel  style="width: 70px" value="إلى تاريخ"/>
                        </h:panelGroup>

                        <h:panelGroup>
                            <p:calendar pattern="dd/MM/yyyy" 
                                        value="#{invDelegatorSalesByMainItemsGroupMB.delegatorSalesByMainItemsGroupSearchBean.dateTo}"
                                        style="width: 56.5%">

                            </p:calendar>
                        </h:panelGroup>
                    </h:panelGroup>

                    <h:panelGroup>

                        <h:panelGroup>
                            <h:panelGroup>
                                <p:outputLabel  style="width: 70px;margin-right: .5%" value="انواع الفاتورة"/>
                            </h:panelGroup>
                        </h:panelGroup>

                        <h:panelGroup>

                            <p:selectCheckboxMenu style="width: 56.5%" id="menu" value="#{invDelegatorSalesByMainItemsGroupMB.selectedInvoiceTypes}" label="انواع الفاتورة"
                                                  filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                                <f:selectItems value="#{invDelegatorSalesByMainItemsGroupMB.invoiceTypes}" />
                            </p:selectCheckboxMenu>

                        </h:panelGroup>

                    </h:panelGroup>



                </h:panelGrid>







                <p:commandButton  value="#{userData.userDDs['SEARCH']}"   process="@parent" action="#{invDelegatorSalesByMainItemsGroupMB.search()}" update="form" oncomplete="PF('generaltable').clearFilters()"/>
                <p:commandButton value="#{userData.userDDs['NEW']}" style="margin-left:.3%;margin-bottom: .5%;width: 50px" action="#{invDelegatorSalesByMainItemsGroupMB.reset()}" update="form" />
                <h:commandLink>  
                    <p:graphicImage name="/img/excel.jpg" width="24"/>  
                    <p:dataExporter type="xls"
                                    target="table" 
                                    fileName="مبيعات مندوب حسب مجموعات الاصناف الرئيسية"
                                    postProcessor="#{invDelegatorSalesByMainItemsGroupMB.postProcessXLS}" />  
                </h:commandLink>

                <p:commandButton style="margin-left:.1%;margin-right: .1%;width: 50px;" ajax="false" onclick="form.target = '_blank'"  value="#{userData.userDDs['PRINT']}" actionListener="#{invDelegatorSalesByMainItemsGroupMB.exportPDF}"/>


                <p:fieldset style="margin-bottom:20px">
                    <p:dataTable 

                        widgetVar="generaltable" id="table" var="generaltable" style="margin-bottom:20px"  rowIndexVar="index" paginator="true" 
                        value="#{invDelegatorSalesByMainItemsGroupMB.invDelegatorSalesByMainItemsGroupBeanList}" >

                        <p:columns value="#{invDelegatorSalesByMainItemsGroupMB.columns}" var="column" columnIndexVar="colIndex" sortBy="#{generaltable[column.property]}">
                            <f:facet name="header">
                                <h:outputText value="#{column.header}" />
                            </f:facet>
                            <h:outputText value="#{generaltable[column.property]}" />
                        </p:columns>




                    </p:dataTable>
                </p:fieldset>
            </p:fieldset>
        </h:form>
    </ui:define>
</ui:composition>
