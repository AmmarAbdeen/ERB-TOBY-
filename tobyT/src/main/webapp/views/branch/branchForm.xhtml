<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../template/newTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">
    <ui:define name="content">
        <f:event listener="#{userData.authorize}" type="preRenderView" />
        <h:form id="form"  enctype="multipart/form-data"  dir="#{userData.dir}" style="margin:0 20px">
            <p:fieldset legend="#{userData.userDDs['BRANCH']}" style="margin-bottom:20px">
                <p:messages autoUpdate="true" rendered="true" id="messages" showDetail="true" closable="true"/>   

                <div class="row">

                    <div class="col-sm-6">
                        <h:panelGrid id="pnl"  class="col-md-12" columns="2" columnClasses="">

                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel value="#{userData.userDDs['BRANCH_CODE']}*"  style="width: 65px"/>                    
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText  style="width: 50%!important" id="SER" a:autofocus="true" value="#{branchFormBean.serial}" required="true" requiredMessage="#{userData.userDDs['REQUIRED']}" >
                                        <p:ajax event="keyup" listener="#{branchFormBean.validateSerial()}" update="messages" />
                                    </p:inputText>

                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid>
                    </div>
                    <div class="col-sm-6">
                        <h:panelGrid> 
                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel  value="#{userData.userDDs['BRANCH_NAME_AR']}*" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" id="nameAr" value="#{branchFormBean.nameAr}" required="true" requiredMessage="#{userData.userDDs['REQUIRED']}" >
                                        <p:ajax event="blur" update="msgnameAr" />
                                    </p:inputText>
                                    <p:message id="msgnameAr" for="nameAr"/>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>
                    <div class="col-sm-6">
                        <h:panelGrid> 
                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel  value="#{userData.userDDs['BRANCH_NAME_EN']}" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" id="nameEn" value="#{branchFormBean.nameEn}" />
                                    <p:message for="nameEn"/>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>
                    <div class="col-sm-6">
                        <h:panelGrid> 
                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel  value="السجل التجاري" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" id="taxCode" value="#{branchFormBean.taxCode}" />
                                    <p:message for="taxCode"/>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 
                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel value="#{userData.userDDs['FIRST_ADDRESS']}" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" id="ad1" value="#{branchFormBean.address1}"/>
                                    <p:message for="ad1"/>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 

                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel value="#{userData.userDDs['SECOND_ADDRESS']}" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" id="ad2" value="#{branchFormBean.address2}" />
                                    <p:message for="ad2"/>
                                </h:panelGroup>

                            </h:panelGroup>

                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 

                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel value="#{userData.userDDs['THIRD_ADDRESS']}" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>

                                    <p:inputText style="width: 50%!important" id="ad3" value="#{branchFormBean.address3}"/>
                                    <p:message for="ad3"/>

                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 
                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel value="#{userData.userDDs['PHONE']}" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" id="ph" value="#{branchFormBean.phone}" />
                                    <p:message for="ph"/>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 
                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel  value="#{userData.userDDs['MOBILE']}" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" id="mob" value="#{branchFormBean.mobile}"/>
                                    <p:message for="mob"/>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 
                            <h:panelGroup>

                                <h:panelGroup> 
                                    <p:outputLabel id="fax" value="#{userData.userDDs['FAX']}" style="width: 65px"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" value="#{branchFormBean.fax}" />
                                    <p:message for="fax"/>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 
                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel value="#{userData.userDDs['EMAIL']}" style="width: 65px"/> 
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:inputText style="width: 50%!important" id="email"  label="email" value="#{branchFormBean.email}"
                                                 placeholder="EmailAddress@domain.com"
                                                 validatorMessage="Must be in format"
                                                 >
                                        <f:validateRegex  pattern="(^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,}))?" />
                                    </p:inputText>
                                    <p:message for="email"/>
                                </h:panelGroup>

                            </h:panelGroup>

                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 

                            <h:panelGroup>


                                <h:panelGroup>
                                    <p:outputLabel value="#{userData.userDDs['LOGO']}"  />
                                </h:panelGroup>



                                <h:panelGroup>
                                    <p:fileUpload style="width: 63%" id="logo"                                          
                                                  label="#{userData.userDDs['CHOOSE']}"
                                                  dragDropSupport="true"  
                                                  cancelLabel="#{userData.userDDs['CANCEL']}" 
                                                  uploadLabel="#{userData.userDDs['UPLOAD']}"  
                                                  fileUploadListener="#{branchFormBean.upload}"
                                                  mode="advanced" 
                                                  update="image"
                                                  allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|xls|xlsx|pdf|txt)$/"
                                                  />
                                    <p:message for="logo"/>
                                </h:panelGroup>


                            </h:panelGroup>

                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 

                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:graphicImage id="image" style="margin-right: 15px;"
                                                    width="160px" height="60px" value="#{branchFormBean.image}" />
                                </h:panelGroup>

                                <h:panelGroup>

                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>

                    <div class="col-sm-6">
                        <h:panelGrid> 

                            <h:panelGroup>

                                <h:panelGroup>
                                    <p:outputLabel  style="width: 65px" 
                                                    value="#{userData.userDDs['COMPANY_NAME']}* " 
                                                    rendered="#{userData.getCompany() == null}" />
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:selectOneMenu  id="com"
                                                      style="width: 48%"
                                                      value="#{branchFormBean.selectedCompanyId}" 
                                                      rendered="#{userData.getCompany() == null}"
                                                      required="true" 
                                                      requiredMessage="#{userData.userDDs['REQUIRED']}" >
                                        <p:ajax  update="msgcom"   />
                                        <f:selectItem itemLabel="#{userData.userDDs['CHOOSE']}" itemValue="" noSelectionOption="true" />
                                        <f:selectItems value="#{branchFormBean.userCompany}" var="com" itemLabel="#{com.name}" itemValue="#{com.id}"/> 
                                    </p:selectOneMenu>

                                    <p:message id="msgcom" for="com"/>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGrid> 
                    </div>
                </div>



                <h:panelGrid  class="col-md-12" columns="1" style="margin-top: ">


                    <h:panelGroup class="centerButtons" > 

                        <p:commandButton class="saveButton" 

                                         rendered="#{(userData.userScreens['branch'].add 
                                                     or userData.isAdmin)}"

                                         id="saveB" 
                                         title="#{userData.userDDs['SAVE']}" 
                                         value="#{userData.userDDs['SAVE']}" 
                                         icon="fa fa-fw fa-save" 
                                         action="#{branchFormBean.save()}"
                                         update="@form" />
                        
                        <p:commandButton class="newButton" 
                                         title="#{userData.userDDs['NEW']}" 
                                         immediate="true"
                                         value="#{userData.userDDs['NEW']}" 
                                         id="newA"
                                         icon="fa fa-plus"
                                         update="@form"
                                         actionListener="#"   />  
                      
                        <p:commandButton 

                            class="closeButton"

                            title="#{userData.userDDs['CANCEL']}"
                            immediate="true" 
                            value="#{userData.userDDs['CANCEL']}" 
                            icon="fa fa-fw fa-backward"
                            action="#{branchFormBean.cancel}"   />

                        
                        
                    </h:panelGroup>

                </h:panelGrid>



                <p:blockUI block="pnl" trigger="saveB" animate="true" >

                    <p:graphicImage library="img" name="9wcA.gif" ></p:graphicImage>
                </p:blockUI>

            </p:fieldset>
        </h:form>
    </ui:define>
</ui:composition>
