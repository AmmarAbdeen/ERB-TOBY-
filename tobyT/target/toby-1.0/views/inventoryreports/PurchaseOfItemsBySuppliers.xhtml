<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../template/newTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="content">
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

        <style >
            .colored {                
                background: #0064bc ;
                color: #fff ;
                font-size: 12px;
            }
            
            
        </style>
        <f:event listener="#{userData.authorize}" type="preRenderView" />
        <h:form  id="form" dir="#{userData.dir}"  style="margin-right: 20px">

            <div style=" position: absolute;left: 20px"> 

                <p:commandButton  style="width: 90px;background-image: none!important;z-index: 2" 
                                  class="viewButton searchButton"
                                  value="Hide/Show"/>  
            </div>

            <p:fieldset  legend="  #{userData.userDDs['PURCHASES_ITM_SUPP']}"

                         style=" position: relative"> 

                <div  id="firstSegment" class="ui-g-12 ui-g-nopad firstset">

                    <div class="ui-g">

                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['FROM_SUPPLIER']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:autoComplete style="width:75%!important"
                                                    dropdown="true"
                                                    converter="#{purchaseOfItemsBySuppliersReportMB.invOrgSiteSupplierConverter}"
                                                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.fromorganizationName}"
                                                    var="organization"
                                                    itemLabel="#{organization}" 
                                                    itemValue="#{organization}"
                                                    forceSelection="true" 
                                                    completeMethod="#{purchaseOfItemsBySuppliersReportMB.completOrgSiteAsSupplier}"

                                                    >

                                    </p:autoComplete>
                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['TO_SUPPLIER']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:autoComplete style="width:75%!important" 

                                                    dropdown="true"

                                                    converter="#{purchaseOfItemsBySuppliersReportMB.invOrgSiteSupplierConverter}"
                                                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.toorganizationName}"
                                                    var="organization"
                                                    itemLabel="#{organization}" 
                                                    itemValue="#{organization}"
                                                    forceSelection="true" 
                                                    completeMethod="#{purchaseOfItemsBySuppliersReportMB.completOrgSiteAsSupplier}" >
                                    </p:autoComplete>
                                </h:panelGroup> 
                            </h:panelGroup>                                   
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel  style="width: 70px" value="#{userData.userDDs['FROM_DATE']}"/>
                                </h:panelGroup>

                                <h:panelGroup>
                                    <p:calendar pattern="dd/MM/yyyy" 
                                                value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.dateFrom}"
                                                style="width: 56%">

                                    </p:calendar>
                                </h:panelGroup>
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel  style="width: 70px" value="#{userData.userDDs['TO_DATE']}"/>
                                </h:panelGroup>

                                <h:panelGroup>
                                    <p:calendar pattern="dd/MM/yyyy" 
                                                value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.dateTo}"
                                                style="width: 56%">

                                    </p:calendar>
                                </h:panelGroup>
                            </h:panelGroup>
                        </div>

                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['FROM_ITEM']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:autoComplete style="width:75%!important"
                                                    dropdown="true"
                                                    converter="#{purchaseOfItemsBySuppliersReportMB.itemDTOFromConverter}"
                                                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.fromItemName}"
                                                    var="item"
                                                    itemLabel="#{item}" 
                                                    itemValue="#{item}"
                                                    forceSelection="true" 
                                                    completeMethod="#{purchaseOfItemsBySuppliersReportMB.completInvItemDTOFrom}"   >

                                    </p:autoComplete>
                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['TO_ITEM']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:autoComplete style="width:75%!important" 

                                                    dropdown="true"

                                                    converter="#{purchaseOfItemsBySuppliersReportMB.itemDTOToConverter}"
                                                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.toItemName}"
                                                    var="item"
                                                    itemLabel="#{item}" 
                                                    itemValue="#{item}"
                                                    forceSelection="true" 
                                                    completeMethod="#{purchaseOfItemsBySuppliersReportMB.completInvItemDTOTo}" >
                                    </p:autoComplete>
                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>

                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['FROM_INVOI_NO']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:autoComplete id="purchaseIdFrom"
                                                    style="width:75%!important " 
                                                    dropdown="true"

                                                    converter="#{purchaseOfItemsBySuppliersReportMB.invInvoiceSalesConverter}"
                                                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.salesInvoiceFrom}"

                                                    var="purchasePerson"
                                                    itemLabel="#{purchasePerson}" 
                                                    itemValue="#{purchasePerson}" 
                                                    forceSelection="true" 
                                                    completeMethod="#{purchaseOfItemsBySuppliersReportMB.completeSalesInvoice}">
                                    </p:autoComplete>
                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>

                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['TO_INVOI_NO']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:autoComplete id="purchaseIdTo"
                                                    style="width:75%!important " 
                                                    dropdown="true"

                                                    converter="#{purchaseOfItemsBySuppliersReportMB.invInvoiceSalesConverter}"
                                                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.salesInvoiceTo}"

                                                    var="purchasePerson"
                                                    itemLabel="#{purchasePerson}" 
                                                    itemValue="#{purchasePerson}" 
                                                    forceSelection="true" 
                                                    completeMethod="#{purchaseOfItemsBySuppliersReportMB.completeSalesInvoice}">
                                    </p:autoComplete>
                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['FROM_REPOS_NO']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:autoComplete style="width:75%!important"
                                                    dropdown="true"
                                                    converter="#{purchaseOfItemsBySuppliersReportMB.invInventoryConverter}"
                                                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.fromInventoryName}"
                                                    var="inventory"
                                                    itemLabel="#{inventory}" 
                                                    itemValue="#{inventory}"
                                                    forceSelection="true" 
                                                    completeMethod="#{purchaseOfItemsBySuppliersReportMB.completeInventory}"
                                                    >

                                    </p:autoComplete>
                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['TO_REPOS_NO']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:autoComplete style="width:75%!important" 

                                                    dropdown="true"
                                                    converter="#{purchaseOfItemsBySuppliersReportMB.invInventoryConverter}"
                                                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.toInventoryName}"
                                                    var="inventory"
                                                    itemLabel="#{inventory}" 
                                                    itemValue="#{inventory}"
                                                    forceSelection="true" 
                                                    completeMethod="#{purchaseOfItemsBySuppliersReportMB.completeInventory}">
                                    </p:autoComplete>

                                </h:panelGroup> 

                            </h:panelGroup>

                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['FROM_INVOI_TYP']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:selectOneMenu style="width:56%!important "
                                                     id="invoiceTypeFrom" 
                                                     value ="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.frompaymentType}">                                                             
                                        <f:selectItem itemLabel="#{userData.userDDs['CHOOSE']}" itemValue="0"/>
                                        <f:selectItem itemLabel="#{userData.userDDs['CASH']}"  itemValue="1" />
                                        <f:selectItem itemLabel="#{userData.userDDs['POSTPONE']}"  itemValue="2" />
                                        <f:selectItem itemLabel="#{userData.userDDs['DECOM_CREDIT']}"  itemValue="3" />
                                    </p:selectOneMenu>    
                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['TO_INVOI_TYP']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>
                                    <p:selectOneMenu style="width:56%!important " id="invoiceTypeTo" 
                                                     value ="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.topaymentType}">    
                                        <f:selectItem itemLabel="#{userData.userDDs['CHOOSE']}" itemValue="0"/>
                                        <f:selectItem itemLabel="#{userData.userDDs['CASH']}"  itemValue="1" />
                                        <f:selectItem itemLabel="#{userData.userDDs['POSTPONE']}"  itemValue="2" />
                                        <f:selectItem itemLabel="#{userData.userDDs['DECOM_CREDIT']}"  itemValue="3" />
                                    </p:selectOneMenu>  
                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="#{userData.userDDs['TOTAL_SALE_REP']}"/>
                                </h:panelGroup> 

                                <h:panelGroup>

                                    <p:selectBooleanCheckbox  id="showReportCheck" value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.showReport}">
                                        <p:ajax update="reportDB" listener="#{purchaseOfItemsBySuppliersReportMB.showItemReport()}" />
                                    </p:selectBooleanCheckbox>

                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel style="width: 70px" value="مورد مختصر"/>
                                </h:panelGroup> 

                                <h:panelGroup>

                                    <p:selectBooleanCheckbox  id="shortReportCheck"  value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.shortReport}">
                                        <p:ajax update="reportDB" listener="#{purchaseOfItemsBySuppliersReportMB.shortReportListing()}" />
                                    </p:selectBooleanCheckbox>

                                </h:panelGroup> 
                            </h:panelGroup>
                        </div>
                        <div class="ui-g-12 ui-md-6">
                            <h:panelGroup>                             
                                <h:panelGroup>
                                    <p:commandButton value="رسم بياني" update="@form" oncomplete="PF('dlg1').show()" />
                                </h:panelGroup> 
                            </h:panelGroup>
                            
                            <p:dialog class="ui-dialog" modal="true" 
                              position='center,center'
                              header="رسم بياني" widgetVar="dlg1">

                        <div  id="donutchart" style="width: 75vw; height: 650px;"></div>

                        <h:panelGroup class=" centerButtons">
                        
                        <p:commandButton  class="printButton"
                                          id="PrintC"
                                          ajax="false"
                                          onclick="form.target = '_blank'"  
                                          icon="fa fa-fw fa-print"
                                          value="#{userData.userDDs['PRINT']}" 
                                          actionListener="#{purchaseOfItemsBySuppliersReportMB.exportChartPDF}"
                                          title="#{userData.userDDs['PRINT']}"
                                          immediate="true" />
                        </h:panelGroup>
                    </p:dialog>
         
            
                        </div>
                    </div>
                     
                </div>
                <paneGrid class="col-md-12 centerButtons" columns="1" >

                    <h:panelGroup   style="margin-top: 2%">


                        <p:commandButton    class="searchButton"
                                            title="#{userData.userDDs['SEARCH']}"
                                            action="#{purchaseOfItemsBySuppliersReportMB.search()}"
                                            id="saveB"
                                            value="#{userData.userDDs['SEARCH']}"
                                            update="PurchaseOfItemsBySuppliersViewTable" 
                                            icon="fa fa-search"  />

                        <p:commandButton  class="newButton"
                                          id="NewB"
                                          title="#{userData.userDDs['NEW']}" 
                                          immediate="true" 
                                          action="#{purchaseOfItemsBySuppliersReportMB.reset()}"
                                          update="form"
                                          value="#{userData.userDDs['NEW']}"
                                          icon="fa fa-plus"
                                          resetValues="true"/>
                        
                        <p:commandButton  class="PrintButton"
                                          id="PrintB"
                                          ajax="false"
                                          onclick="form.target = '_blank'"  
                                          icon="fa fa-fw fa-print"
                                          value="#{userData.userDDs['PRINT']}" 
                                          actionListener="#{purchaseOfItemsBySuppliersReportMB.exportPDF}"
                                          title="#{userData.userDDs['PRINT']}"
                                          immediate="true" />

                        <p:commandButton  class="closeButton"
                                          id="CloseB"
                                          icon="fa fa-fw fa-backward"  
                                          title="#{userData.userDDs['BACK']}"
                                          action="exit"
                                          value="#{userData.userDDs['BACK']}"/>
                        <h:commandLink>  
                            <p:graphicImage name="/img/excel.jpg" width="24"/>  
                            <p:dataExporter type="xls"
                                            target="PurchaseOfItemsBySuppliersViewTable" 
                                            fileName=" تقرير مبيعات الاصناف"
                                            postProcessor="#{purchaseOfItemsBySuppliersReportMB.postProcessXLS}" />  
                        </h:commandLink>

                        <p:blockUI block="form" trigger="saveB NewB PrintB CloseB shortReportCheck showReportCheck" animate="true" >

                            <p:graphicImage library="img" name="9wcA.gif" ></p:graphicImage>

                        </p:blockUI> 


                    </h:panelGroup>
                </paneGrid>
            </p:fieldset>

            <p:fieldset id="reportDB">
                <p:dataTable 
                    paginator="true"
                    rows="20"
                    rendered="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.showReport eq false}"
                    draggableColumns="true" 
                    var="PurchaseOfItemsBySuppliersViewTable" 
                    widgetVar="PurchaseOfItemsBySuppliersViewTable"  
                    rowKey="#{PurchaseOfItemsBySuppliersViewTable}"
                    rowIndexVar="index" 
                    value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersViewBeanList}" 
                    dir="rtl" 
                    emptyMessage="#{userData.userDDs['EMPTY_TABLE']}"
                    id="PurchaseOfItemsBySuppliersViewTable"
                    rowStyleClass="#{not ( PurchaseOfItemsBySuppliersViewTable.groupName eq null) and purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.shortReport eq false ? 'colored' : null} ">
                    <f:facet name="header">


                        <p:outputPanel>
                            <h:outputText value="#{userData.userDDs['SEARCH']} : "  style="font-size: large" />
                            <p:inputText id="globalFilter" onkeyup="PF('PurchaseOfItemsBySuppliersViewTable').filter()" style="width:150px" />
                        </p:outputPanel>

                    </f:facet>

                    <p:column   style="width: 10vh;text-align: right;font-size: 2.2vh" headerText="#{userData.userDDs['SUPPLIER_NAME']}" 

                                filterBy="#{PurchaseOfItemsBySuppliersViewTable.groupName}" 
                                filterMatchMode="contains" 
                                sortBy="#{PurchaseOfItemsBySuppliersViewTable.groupName}"
                                filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.groupName}" />
                    </p:column>

                    <p:column   style="width: 8vh;text-align: right;font-size: 1.8vh" headerText="#{userData.userDDs['INVOICE_NO']}" 

                                filterBy="#{PurchaseOfItemsBySuppliersViewTable.serial}" 
                                filterMatchMode="contains" 
                                sortBy="#{PurchaseOfItemsBySuppliersViewTable.serial}"
                                filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.serial}" />
                    </p:column>


                    <p:column style="width: 12vh;text-align: right;font-size: 1.8vh" 
                              headerText="#{userData.userDDs['INVOICE_DATE']}"

                              filterBy="#{PurchaseOfItemsBySuppliersViewTable.date}" 
                              filterMatchMode="contains" 
                              sortBy="#{PurchaseOfItemsBySuppliersViewTable.date}"
                              filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.date}">
                            <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                        </p:outputLabel>
                    </p:column>

                    <p:column style="width: 12vh;text-align: right;font-size: 1.8vh" filterStyle="display:none"
                              headerText="#{userData.userDDs['ITEM_NUMBER']}"

                              filterBy="#{PurchaseOfItemsBySuppliersViewTable.itemBarcode}" 
                              filterMatchMode="contains" 
                              sortBy="#{PurchaseOfItemsBySuppliersViewTable.itemBarcode}"
                              filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.itemBarcode}" />
                    </p:column>

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh" 
                              headerText="#{userData.userDDs['ITEM_NAME']}" 

                              filterBy="#{PurchaseOfItemsBySuppliersViewTable.itemName}" 
                              filterMatchMode="contains" 
                              sortBy="#{PurchaseOfItemsBySuppliersViewTable.itemName}"
                              filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.itemName}" />
                    </p:column>

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh" 
                              headerText="#{userData.userDDs['UNIT']}" 

                              filterBy="#{PurchaseOfItemsBySuppliersViewTable.detailUnitName}" 
                              filterMatchMode="contains" 
                              sortBy="#{PurchaseOfItemsBySuppliersViewTable.detailUnitName}"
                              filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.detailUnitName}" >

                        </p:outputLabel>
                    </p:column>  

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh" 
                              headerText="#{userData.userDDs['QUANTITY']}"

                              filterBy="#{PurchaseOfItemsBySuppliersViewTable.detailItemQuantity}" 
                              filterMatchMode="contains" 
                              sortBy="#{PurchaseOfItemsBySuppliersViewTable.detailItemQuantity}"
                              filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.detailItemQuantity}" >
                        </p:outputLabel>                           
                    </p:column>

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh"  headerText="#{userData.userDDs['UNIT_PRICE']}"

                              filterBy="#{PurchaseOfItemsBySuppliersViewTable.cost}" 
                              filterMatchMode="contains" 
                              sortBy="#{PurchaseOfItemsBySuppliersViewTable.cost}"
                              filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.cost}" />

                    </p:column>

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh"  headerText="#{userData.userDDs['DISCOUNT']}"


                              filterBy="#{PurchaseOfItemsBySuppliersViewTable.discount}" 
                              filterMatchMode="contains" 
                              sortBy="#{PurchaseOfItemsBySuppliersViewTable.discount}"
                              filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.discount}" />

                    </p:column>

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh"  headerText="#{userData.userDDs['TOTAL']}"

                              filterBy="#{PurchaseOfItemsBySuppliersViewTable.net}" 
                              filterMatchMode="contains" 
                              sortBy="#{PurchaseOfItemsBySuppliersViewTable.net}"
                              filterable="false">

                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable.net}" />
                    </p:column> 
                    <p:columnGroup type="footer">
                        <p:row>
                            <p:column colspan="9"  footerText="#{userData.userDDs['TOTAL']}" /> 
                            <p:column  footerText="#{purchaseOfItemsBySuppliersReportMB.total}" /> 
                        </p:row>

                    </p:columnGroup>

                </p:dataTable>



                <p:dataTable style="margin-top: 2%"
                             rendered="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.showReport eq true}"
                             draggableColumns="true" 
                             var="PurchaseOfItemsBySuppliersViewTable2" 
                             widgetVar="PurchaseOfItemsBySuppliersViewTable2"  
                             rowKey="#{PurchaseOfItemsBySuppliersViewTable2}"
                             rowIndexVar="index" 
                             value="#{purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersViewBeanList}" 
                             dir="rtl" 
                             emptyMessage="#{userData.userDDs['EMPTY_TABLE']}"
                             id="PurchaseOfItemsBySuppliersViewTable2"
                             rowStyleClass="#{not ( PurchaseOfItemsBySuppliersViewTable2.groupName eq null) and purchaseOfItemsBySuppliersReportMB.purchaseOfItemsBySuppliersSearchBean.shortReport eq false ? 'colored' : null} ">
                    <p:column style="width: 12vh;text-align: right;font-size: 1.8vh" filterStyle="display:none"
                              headerText="#{userData.userDDs['GROUP_NAME']}" >
                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable2.groupName}" />
                    </p:column>
                    <p:column   style="width: 8vh;text-align: right;font-size: 1.8vh" headerText="#{userData.userDDs['INVOICE_NO']}" >
                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable2.serial}" />
                    </p:column>

                    <p:column style="width: 12vh;text-align: right;font-size: 1.8vh" filterStyle="display:none"
                              headerText="#{userData.userDDs['ITEM_NUMBER']}" >
                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable2.itemCode}" />
                    </p:column>

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh" 
                              headerText="#{userData.userDDs['ITEM_NAME']}" >
                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable2.itemName}" />
                    </p:column>

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh" 
                              headerText="#{userData.userDDs['UNIT']}" >
                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable2.itemUnitName}" >

                        </p:outputLabel>
                    </p:column>  
                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh" 
                              headerText="#{userData.userDDs['QUANTITY']}">
                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable2.itemQuantity}" >
                        </p:outputLabel>                           
                    </p:column>

                    <p:column style="width: 10vh;text-align: right;font-size: 1.8vh"  headerText="#{userData.userDDs['TOTAL']}" >
                        <p:outputLabel value="#{PurchaseOfItemsBySuppliersViewTable2.net}" />
                    </p:column>
                    <p:columnGroup type="footer">
                        <p:row>
                            <p:column colspan="6"  footerText="#{userData.userDDs['TOTAL']}" /> 
                            <p:column  footerText="#{purchaseOfItemsBySuppliersReportMB.total}" /> 
                        </p:row>

                    </p:columnGroup>
                </p:dataTable>

            </p:fieldset>

            <script type="text/javascript">
                google.load("visualization", "1", {packages: ["corechart"]});
                google.charts.setOnLoadCallback(drawChart);
                function drawChart() {
                    var data = google.visualization.arrayToDataTable(
                #{purchaseOfItemsBySuppliersReportMB.pieChartsRows}
                    );
                    var options = {
                        title: 'مشتريات اصناف حسب الموردين',
                        height: 800,
                        seriesType: "bars",
                        vAxis: {
                            title: "الاجمالي"
                        },
                        hAxis: {
                            title: "اسم المورد",
                            slantedText: true, /* Enable slantedText for horizontal axis */
                            slantedTextAngle: 90 /* Define slant Angle */
                        },
                        'chartArea': {'width': '100%', height: '100%', top: '9%', left: '15%', right: '3%', bottom: '30%'} /* Adjust chart alignment to fit vertical labels for horizontal axis*/
                    };

                    var chart = new google.visualization.ComboChart(document.getElementById('donutchart'));
                    chart.draw(data, options);
                }
            </script>
            
        </h:form>
    </ui:define>
</ui:composition>
